<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#374151"/>
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="manifest" href="manifest.json">

    <title>ჩემი ვარჯიშები</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tone.js ხმის ეფექტისთვის -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        .main-button {
            transition: transform 0.2s, background-color 0.2s;
        }
        .main-button:hover {
            transform: scale(1.05);
        }
        .page-section {
            display: none;
        }
        #video-modal, #reset-modal, #timer-modal, #warmup-modal {
            transition: opacity 0.3s ease;
        }
        .exercise-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 4px;
            border-bottom: 1px solid #4b5563; /* gray-600 */
            transition: background-color 0.2s;
        }
        .exercise-item:last-child {
            border-bottom: none;
        }
        .exercise-details {
            font-size: 0.9rem;
            color: #d1d5db; /* gray-300 */
        }
        /* Completed state styles */
        .exercise-item.completed {
             background-color: #374151; /* gray-700 */
        }
        .exercise-item.completed .font-bold,
        .exercise-item.completed .exercise-details {
            text-decoration: line-through;
            color: #6b7280; /* gray-500 */
        }
        .complete-checkbox {
             width: 1.5rem;
             height: 1.5rem;
             margin-right: 1rem;
             flex-shrink: 0;
             cursor: pointer;
        }
        /* Timer styles */
        .timer-circle-bg { stroke: #4b5563; }
        .timer-circle-progress {
            stroke: #34d399;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dashoffset 1s linear;
        }
    </style>
</head>
<body class="bg-gray-800 text-white">

    <!-- Header -->
    <header class="bg-gray-900 shadow-lg p-6 sticky top-0 z-10">
        <h1 id="header-title" class="text-3xl font-bold text-center text-emerald-400">აირჩიე სექცია</h1>
    </header>

    <main class="p-4 sm:p-6 md:p-8">
        <!-- ნავიგაციის ღილაკები -->
        <div id="navigation-page" class="page-section">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
                <button onclick="showPage('workouts-main-page', 'ვარჯიშების გეგმა')" class="main-button bg-sky-600 hover:bg-sky-700 text-white font-bold py-8 px-4 rounded-xl text-2xl shadow-lg">
                    ვარჯიშები
                </button>
                <button onclick="showPage('nutrition-page', 'კვების გეგმა')" class="main-button bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-8 px-4 rounded-xl text-2xl shadow-lg">
                    კვების გეგმა
                </button>
            </div>
        </div>
        
        <!-- უკან დაბრუნების და რესეტის ღილაკები -->
         <div id="action-buttons" class="hidden items-center justify-between mb-6">
            <button id="back-button" onclick="goBack()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg">
                &larr; უკან
            </button>
            <button id="reset-button-container" onclick="openResetModal()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg">
                პროგრესის გასუფთავება
            </button>
        </div>

        <!-- ვარჯიშების მთავარი მენიუ (კვირების არჩევა) -->
        <div id="workouts-main-page" class="page-section">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
                 <button onclick="showPage('week-1-page', 'კვირა 1: ტექნიკის დახვეწა')" class="main-button bg-sky-600 hover:bg-sky-700 text-white font-bold py-8 px-4 rounded-xl text-2xl shadow-lg">კვირა 1<span class="block text-sm font-normal">ტექნიკის დახვეწა</span></button>
                 <button onclick="showPage('week-2-page', 'კვირა 2: მოცულობის გაზრდა')" class="main-button bg-sky-600 hover:bg-sky-700 text-white font-bold py-8 px-4 rounded-xl text-2xl shadow-lg">კვირა 2<span class="block text-sm font-normal">მოცულობის გაზრდა</span></button>
                 <button onclick="showPage('week-3-page', 'კვირა 3: წონის მომატება')" class="main-button bg-sky-600 hover:bg-sky-700 text-white font-bold py-8 px-4 rounded-xl text-2xl shadow-lg">კვირა 3<span class="block text-sm font-normal">წონის მომატება</span></button>
                 <button onclick="showPage('week-4-page', 'კვირა 4: ახალი წონის დაუფლება')" class="main-button bg-sky-600 hover:bg-sky-700 text-white font-bold py-8 px-4 rounded-xl text-2xl shadow-lg">კვირა 4<span class="block text-sm font-normal">ახალი წონის დაუფლება</span></button>
            </div>
        </div>
        
        <!-- კვების სექცია -->
        <div id="nutrition-page" class="page-section">
            <div class="space-y-8 text-gray-300">
                <div class="bg-gray-700 rounded-xl p-6">
                    <h2 class="text-2xl font-bold border-b-2 border-yellow-500 pb-2 mb-4">ვარჯიშის დღის გეგმა (3 კვება)</h2>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-emerald-400">კვება #1: პირველი სადილი (12:00 - 13:00)</h3>
                            <p class="text-sm text-gray-400 mb-2">მიზანი: დღის დაწყება სრულფასოვანი, მძლავრი კვებით.</p>
                            <ul class="list-disc list-inside space-y-1">
                                <li><span class="font-semibold">ვარიანტი 1:</span> მოხარშული ქათმის ფილე (150-200 გრ) + დიდი პორცია ბოსტნეულის სალათი + წიწიბურა.</li>
                                <li><span class="font-semibold">ვარიანტი 2:</span> მოხარშული თევზი (200 გრ) + ყავისფერი ბრინჯი + მოთუშული ბოსტნეული.</li>
                                <li><span class="font-semibold">ვარიანტი 3:</span> 3-4 კვერცხის ომლეტი ბოსტნეულით და 1 ნაჭერი პური.</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-emerald-400">კვება #2: ვარჯიშის წინა საწვავი (18:00 - 18:30)</h3>
                            <p class="text-sm text-gray-400 mb-2">მიზანი: ვარჯიშისთვის საჭირო სწრაფი ენერგიის მიღება.</p>
                            <ul class="list-disc list-inside space-y-1">
                                <li><span class="font-semibold">ვარიანტი 1 (იდეალური):</span> 1 საშუალო ზომის ბანანი.</li>
                                <li><span class="font-semibold">ვარიანტი 2:</span> 1 დიდი მწვანე ვაშლი.</li>
                            </ul>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-emerald-400">კვება #3: ვახშამი / აღდგენა (21:00 - 21:30)</h3>
                            <p class="text-sm text-gray-400 mb-2">მიზანი: ვარჯიშის შემდეგ კუნთების მომარაგება ცილით.</p>
                            <ul class="list-disc list-inside space-y-1">
                                <li><span class="font-semibold">ვარიანტი 1:</span> უცხიმო ხაჭო (200 გრ) კენკრასთან.</li>
                                <li><span class="font-semibold">ვარიანტი 2:</span> ბერძნული იოგურტი (1 კოლოფი) + 1 კოვზი ჩიას თესლი.</li>
                                <li><span class="font-semibold">ვარიანტი 3:</span> ქათმის ფილეს სალათი.</li>
                                <li><span class="font-semibold">ვარიანტი 4:</span> 2-3 მოხარშული კვერცხი.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-700 rounded-xl p-6">
                    <h2 class="text-2xl font-bold border-b-2 border-yellow-500 pb-2 mb-4">დასვენების დღის გეგმა (3 კვება)</h2>
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-emerald-400">კვება #1: სადილი (12:00 - 13:00)</h3>
                            <p class="text-sm text-gray-400 mb-2">იგივე, რაც ვარჯიშის დღეს. სრულფასოვანი, დაბალანსებული კვება.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-emerald-400">კვება #2: სამხარი (16:00 - 17:00)</h3>
                            <p class="text-sm text-gray-400 mb-2">მიზანი: ენერგიის შენარჩუნება და შიმშილის კონტროლი.</p>
                            <ul class="list-disc list-inside space-y-1">
                                <li><span class="font-semibold">ვარიანტი 1:</span> ბერძნული იოგურტი (1 კოლოფი).</li>
                                <li><span class="font-semibold">ვარიანტი 2:</span> 150 გრ ხაჭო.</li>
                                <li><span class="font-semibold">ვარიანტი 3:</span> ბოსტნეულის სალათი 1 მოხარშული კვერცხით.</li>
                            </ul>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-emerald-400">კვება #3: ვახშამი (19:00 - 20:00)</h3>
                            <p class="text-sm text-gray-400 mb-2">მიზანი: მსუბუქი, ცილით მდიდარი კვება.</p>
                             <ul class="list-disc list-inside space-y-1">
                                <li><span class="font-semibold">ვარიანტი 1:</span> თევზი (150 გრ) + ბოსტნეულის სალათი.</li>
                                <li><span class="font-semibold">ვარიანტი 2:</span> ოსპის სუპი + სალათი.</li>
                                <li><span class="font-semibold">ვარიანტი 3:</span> 2-3 კვერცხის ომლეტი ბოსტნეულით.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-700 rounded-xl p-6">
                     <h2 class="text-2xl font-bold border-b-2 border-yellow-500 pb-2 mb-4">მნიშვნელოვანია</h2>
                     <ul class="list-disc list-inside space-y-2">
                        <li><b>წყალი:</b> არ დაივიწყო წყლის მიღება. დალიე მინიმუმ 2 ლიტრი წყალი დღის განმავლობაში.</li>
                        <li><b>მოქნილობა:</b> ეს გეგმა არის შაბლონი. შენ შეგიძლია ვარიანტები ცვალო შენი სურვილის მიხედვით.</li>
                     </ul>
                </div>
            </div>
        </div>
        
        <!-- Container for dynamically generated week pages -->
        <div id="weeks-container"></div>
        
    </main>

    <!-- Modals -->
    <div id="video-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="bg-gray-900 p-2 rounded-lg shadow-xl w-full max-w-2xl relative">
            <button onclick="closeCurrentModal()" class="absolute -top-3 -right-3 bg-white text-gray-800 rounded-full h-8 w-8 flex items-center justify-center font-bold text-xl z-20">&times;</button>
            <div id="video-container" class="aspect-video w-full"></div>
        </div>
    </div>
    
    <div id="reset-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="bg-gray-900 p-6 rounded-lg shadow-xl w-full max-w-sm text-center">
            <h3 class="text-xl font-bold mb-4">დადასტურება</h3>
            <p class="text-gray-300 mb-6">დარწმუნებული ხართ, რომ გსურთ მთელი პროგრესის გასუფთავება?</p>
            <div class="flex justify-center gap-4">
                <button onclick="closeCurrentModal()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg">გაუქმება</button>
                <button onclick="confirmReset()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg">გასუფთავება</button>
            </div>
        </div>
    </div>

    <div id="timer-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="bg-gray-900 p-8 rounded-2xl shadow-xl w-full max-w-sm text-center flex flex-col items-center">
            <div class="relative w-48 h-48 mb-6">
                <svg class="w-full h-full" viewBox="0 0 100 100">
                    <circle class="timer-circle-bg" cx="50" cy="50" r="45" stroke-width="10"></circle>
                    <circle id="timer-progress" class="timer-circle-progress" cx="50" cy="50" r="45" stroke-width="10"></circle>
                </svg>
                <span id="timer-display" class="absolute inset-0 flex items-center justify-center text-5xl font-mono font-bold"></span>
            </div>
            <h3 class="text-2xl font-bold mb-2">დაისვენე</h3>
            <p class="text-gray-400 mb-6">შემდეგი მისვლა მალე დაიწყება...</p>
            <button onclick="closeCurrentModal()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-lg w-full">გამოტოვება</button>
        </div>
    </div>
    
    <div id="warmup-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="bg-gray-900 p-6 rounded-lg shadow-xl w-full max-w-2xl relative">
            <button onclick="closeCurrentModal()" class="absolute -top-3 -right-3 bg-white text-gray-800 rounded-full h-8 w-8 flex items-center justify-center font-bold text-xl z-20">&times;</button>
            <h2 class="text-2xl font-bold text-yellow-400 border-b-2 border-yellow-500 pb-2 mb-4">დეტალური გახურება (10 წუთი)</h2>
            <div class="space-y-4 text-gray-300">
                <div>
                    <h3 class="font-semibold text-lg text-emerald-400">ნაწილი 1: ზოგადი გახურება (5 წუთი)</h3>
                    <p class="text-sm text-gray-400">მიზანი: სხეულის ტემპერატურის აწევა, სისხლის მიმოქცევის გაუმჯობესება.</p>
                    <ul class="list-disc list-inside mt-2">
                        <li><b>სარბენი ბილიკი:</b> სწრაფი სიარული (5.0-6.0 კმ/სთ).</li>
                        <li><b>ელიპტიკური ტრენაჟორი:</b> მსუბუქი წინააღმდეგობა.</li>
                        <li><b>ველოტრენაჟორი:</b> მსუბუქი წინააღმდეგობა.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-lg text-emerald-400">ნაწილი 2: დინამიური გაჭიმვები (5 წუთი)</h3>
                    <p class="text-sm text-gray-400">მიზანი: სახსრების და კუნთების მომზადება მოძრაობებისთვის.</p>
                    <ul class="list-disc list-inside mt-2">
                        <li>მხრების დატრიალება (15წმ წინ, 15წმ უკან).</li>
                        <li>ხელების დატრიალება (15წმ წინ, 15წმ უკან).</li>
                        <li>ტანის მობრუნება (30-45 წამი).</li>
                        <li>ფეხების აქნევა (15წმ თითო ფეხზე).</li>
                        <li>ჩაჯდომები საკუთარი წონით (10-12 გამეორება).</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables
        const headerTitle = document.getElementById('header-title');
        const actionButtons = document.getElementById('action-buttons');
        const resetButtonContainer = document.getElementById('reset-button-container');
        const videoModal = document.getElementById('video-modal');
        const resetModal = document.getElementById('reset-modal');
        const timerModal = document.getElementById('timer-modal');
        const warmupModal = document.getElementById('warmup-modal');
        const videoContainer = document.getElementById('video-container');
        const timerDisplay = document.getElementById('timer-display');
        const progressCircle = document.getElementById('timer-progress');
        const STORAGE_KEY = 'workoutAppProgress';
        let activeModal = null;
        let timerInterval;
        let pageHistory = ['navigation-page'];

        // Page navigation
        function showPage(pageId, title) {
            document.querySelectorAll('.page-section').forEach(page => page.style.display = 'none');
            actionButtons.classList.add('hidden');
            
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.style.display = 'block';
            }
            
            headerTitle.textContent = title;

            if (pageId !== 'navigation-page') {
                actionButtons.classList.remove('hidden');
                actionButtons.classList.add('flex');
                if (pageHistory[pageHistory.length - 1] !== pageId) {
                    pageHistory.push(pageId);
                }
            } else {
                 pageHistory = ['navigation-page'];
            }
            
            resetButtonContainer.style.display = pageId.startsWith('week-') ? 'block' : 'none';
        }
        
        function goBack() {
            if (pageHistory.length > 1) {
                const currentPageId = pageHistory.pop();
                const lastPageId = pageHistory[pageHistory.length - 1];
                let title = 'აირჩიე სექცია'; // Default title
                const lastPageButton = document.querySelector(`button[onclick*="'${lastPageId}'"]`);
                 if (lastPageButton) {
                    title = lastPageButton.childNodes[0].nodeValue || "მენიუ";
                 }
                 showPage(lastPageId, title);
            }
        }

        // Modal functions
        function openModal(videoId) {
            videoContainer.innerHTML = `<iframe class="w-full h-full" src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
            videoModal.classList.remove('hidden');
            activeModal = videoModal;
        }
        
        function openResetModal() {
            resetModal.classList.remove('hidden');
            activeModal = resetModal;
        }
        
        function openWarmupModal() {
            warmupModal.classList.remove('hidden');
            activeModal = warmupModal;
        }
        
        function openTimerModal(duration) {
            if (timerInterval) clearInterval(timerInterval);
            Tone.start();

            const CIRCLE_LENGTH = 2 * Math.PI * 45;
            progressCircle.style.strokeDasharray = CIRCLE_LENGTH;
            let timeLeft = duration;
            
            const updateTimer = () => {
                timerDisplay.textContent = timeLeft;
                const offset = ((duration - timeLeft) / duration) * CIRCLE_LENGTH;
                progressCircle.style.strokeDashoffset = offset;
            };

            updateTimer();
            timerModal.classList.remove('hidden');
            activeModal = timerModal;

            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    playFinishSound();
                    setTimeout(() => closeCurrentModal(), 1000);
                }
            }, 1000);
        }

        function closeCurrentModal() {
            if (activeModal) {
                activeModal.classList.add('hidden');
                if (activeModal.id === 'video-modal') videoContainer.innerHTML = '';
                if (activeModal.id === 'timer-modal') clearInterval(timerInterval);
                activeModal = null;
            }
        }
        
        // Progress tracking
        function handleCheckboxChange(event) {
            const exerciseItem = event.target.closest('.exercise-item');
            exerciseItem.classList.toggle('completed', event.target.checked);
            saveProgress();
        }
        
        function saveProgress() {
            const progress = {};
            document.querySelectorAll('.exercise-item').forEach(item => {
                progress[item.dataset.exerciseId] = item.classList.contains('completed');
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
        }
        
        function loadProgress() {
            const progress = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
            Object.keys(progress).forEach(id => {
                const item = document.querySelector(`.exercise-item[data-exercise-id="${id}"]`);
                if (item && progress[id]) {
                    item.classList.add('completed');
                    item.querySelector('.complete-checkbox').checked = true;
                }
            });
        }
        
        function confirmReset() {
            localStorage.removeItem(STORAGE_KEY);
            document.querySelectorAll('.exercise-item.completed').forEach(item => {
                item.classList.remove('completed');
                item.querySelector('.complete-checkbox').checked = false;
            });
            closeCurrentModal();
        }

        // Sound effect
        function playFinishSound() {
            const synth = new Tone.Synth().toDestination();
            synth.triggerAttackRelease("C5", "8n", Tone.now());
            setTimeout(() => synth.triggerAttackRelease("G5", "8n", Tone.now() + 0.2), 200);
        }

        // Dynamic page builder
        function buildWeekPage(weekNumber, weekData) {
            const page = document.createElement('div');
            page.id = `week-${weekNumber}-page`;
            page.className = 'page-section';
            
            let content = `
                <div class="mb-6">
                    <button onclick="openWarmupModal()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-4 rounded-xl text-xl shadow-lg flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                        ${weekData.warmupText || 'გახურება (10 წუთი)'}
                    </button>
                </div>
                 <div class="mb-6 p-4 bg-gray-700 rounded-xl">
                    <p class="text-center text-yellow-300"><b class="font-bold">შენიშვნა:</b> ${weekData.note}</p>
                </div>
                <div class="space-y-6">
            `;

            weekData.days.forEach(day => {
                content += `
                    <div class="bg-gray-700 rounded-xl p-6">
                        <h2 class="text-xl font-semibold border-b-2 border-emerald-500 pb-2 mb-4">${day.title}</h2>
                        <ul class="space-y-2 text-gray-300">
                `;
                day.exercises.forEach(ex => {
                    content += `
                        <li class="exercise-item" data-exercise-id="${ex.id}"><input type="checkbox" class="complete-checkbox"><div class="flex-grow"><div><span class="font-bold">${ex.name}</span><div class="exercise-details">${ex.details}</div></div></div> <div class="flex items-center flex-shrink-0 ml-2"><button onclick="openTimerModal(${ex.rest})" class="p-1 rounded-full text-sky-400 hover:bg-gray-600"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></button><button onclick="openModal('${ex.video}')" class="p-1 rounded-full text-emerald-400 hover:bg-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button></div></li>
                    `;
                });
                content += '</ul>';
                if(day.cooldown) {
                    content += `
                        <div class="mt-4 pt-4 border-t-2 border-dashed border-gray-600">
                            <h3 class="text-lg font-semibold text-emerald-300">კარდიო (გაგრილება)</h3>
                            <p class="text-gray-400">${day.cooldown}</p>
                        </div>
                    `;
                }
                content += '</div>';
            });

            content += '</div>';
            page.innerHTML = content;
            document.getElementById('weeks-container').appendChild(page);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const workoutData = {
                week1: {
                    warmupText: 'გახურება (10 წუთი)',
                    note: 'ყოველი ვარჯიშის უნაკლოდ შესწავლა. გამოიყენე ისეთი წონა, რომლითაც დაღლილობის გარეშე შეძლებ მითითებული გამეორებების შესრულებას.',
                    days: [
                        {
                            title: 'ორშაბათი: ვარჯიში A (ზედა ტანი)',
                            exercises: [
                                { id: 'w1a1', name: 'Lat Pulldown (ზემოდან მოზიდვა)', details: '3x10 | 60წმ', rest: 60, video: 'Yc1r9pGk5sE' },
                                { id: 'w1a2', name: 'Dumbbell Bench Press (წოლჭიმი განტელებით)', details: '3x10 | 60წმ', rest: 60, video: 'BRrxLaSKfYU' },
                                { id: 'w1a3', name: 'Seated Cable Row (ჰორიზონტალური ბლოკის მოზიდვა)', details: '3x10 | 60წმ', rest: 60, video: 'GZbfZ033f74' },
                                { id: 'w1a4', name: 'Seated Dumbbell Shoulder Press (მხრებით აჭიმვა)', details: '3x12 | 60წმ', rest: 60, video: 'qEwKCR5JCog' },
                                { id: 'w1a5', name: 'Dumbbell Bicep Curl (ბიცეფსი)', details: '2x12 | 45წმ', rest: 45, video: 'ykJmrZ5v0Oo' },
                                { id: 'w1a6', name: 'Tricep Pushdown (ტრიცეფსი)', details: '2x12 | 45წმ', rest: 45, video: '2-LAMcpzODo' }
                            ],
                            cooldown: '15 წუთი - Treadmill (სარბენი ბილიკი), სწრაფი სიარული (5.5-6.5 კმ/სთ), აღმართის გარეშე.'
                        },
                        {
                            title: 'ოთხშაბათი: ვარჯიში B (ქვედა ტანი)',
                            exercises: [
                                { id: 'w1b1', name: 'Goblet Squat (თასისებრი ჩაჯდომა)', details: '3x10 | 90წმ', rest: 90, video: '7p32_vI3L2A' },
                                { id: 'w1b2', name: 'Dumbbell Romanian Deadlift (რუმინული ამოწევა)', details: '3x12 | 60წმ', rest: 60, video: '_oyxCn2iSjU' },
                                { id: 'w1b3', name: 'Bodyweight Lunges (გამოხტომები)', details: '3x10 (თითო) | 60წმ', rest: 60, video: 'L8fvypoZc7I' },
                                { id: 'w1b4', name: 'Calf Raises (წვივებზე აწევა)', details: '3x15 | 45წმ', rest: 45, video: 'd_0d5s3p-l0' },
                                { id: 'w1b5', name: 'Plank (პლანკა)', details: '3x30-45წმ | 60წმ', rest: 60, video: 'pDdk2rQO3dY' },
                                { id: 'w1b6', name: 'Leg Raises (ფეხების აწევა)', details: '3x15 | 60წმ', rest: 60, video: 'r24ntO4IvKc' }
                            ],
                             cooldown: '15 წუთი - Elliptical Trainer (ელიპტიკური), საშუალო წინააღმდეგობა.'
                        },
                         {
                            title: 'პარასკევი: ვარჯიში A (ზედა ტანი)',
                            exercises: [
                                { id: 'w1c1', name: 'Lat Pulldown (ზემოდან მოზიდვა)', details: '3x10 | 60წმ', rest: 60, video: 'Yc1r9pGk5sE' },
                                { id: 'w1c2', name: 'Dumbbell Bench Press (წოლჭიმი განტელებით)', details: '3x10 | 60წმ', rest: 60, video: 'BRrxLaSKfYU' },
                                { id: 'w1c3', name: 'Seated Cable Row (ჰორიზონტალური ბლოკის მოზიდვა)', details: '3x10 | 60წმ', rest: 60, video: 'GZbfZ033f74' },
                                { id: 'w1c4', name: 'Seated Dumbbell Shoulder Press (მხრებით აჭიმვა)', details: '3x12 | 60წმ', rest: 60, video: 'qEwKCR5JCog' },
                                { id: 'w1c5', name: 'Dumbbell Bicep Curl (ბიცეფსი)', details: '2x12 | 45წმ', rest: 45, video: 'ykJmrZ5v0Oo' },
                                { id: 'w1c6', name: 'Tricep Pushdown (ტრიცეფსი)', details: '2x12 | 45წმ', rest: 45, video: '2-LAMcpzODo' }
                            ],
                             cooldown: '15 წუთი - Stationary Bike (ველოტრენაჟორი), სტაბილური, საშუალო ტემპი.'
                        }
                    ]
                },
                week2: {
                    warmupText: 'გახურება (10 წუთი)',
                    note: 'იგივე წონებით, ეცადე, მიაღწიო გამეორებების მაქსიმალურ ზღვარს.',
                    days: [
                        {
                            title: 'ორშაბათი: ვარჯიში B (ქვედა ტანი)',
                            exercises: [
                                { id: 'w2a1', name: 'Goblet Squat (თასისებრი ჩაჯდომა)', details: '3x12 | 90წმ', rest: 90, video: '7p32_vI3L2A' },
                                { id: 'w2a2', name: 'Dumbbell Romanian Deadlift (რუმინული ამოწევა)', details: '3x15 | 60წმ', rest: 60, video: '_oyxCn2iSjU' },
                                { id: 'w2a3', name: 'Bodyweight Lunges (გამოხტომები)', details: '3x12 (თითო) | 60წმ', rest: 60, video: 'L8fvypoZc7I' },
                                { id: 'w2a4', name: 'Calf Raises (წვივებზე აწევა)', details: '3x20 | 45წმ', rest: 45, video: 'd_0d5s3p-l0' },
                                { id: 'w2a5', name: 'Plank (პლანკა)', details: '3x45-60წმ | 60წმ', rest: 60, video: 'pDdk2rQO3dY' },
                                { id: 'w2a6', name: 'Leg Raises (ფეხების აწევა)', details: '3x20 | 60წმ', rest: 60, video: 'r24ntO4IvKc' }
                            ],
                            cooldown: '20 წუთი - Treadmill. 5წთ სწრაფი სიარული (6.0), 10წთ მცირე აღმართი (2-3%), 5წთ სწორი ზედაპირი.'
                        },
                        {
                            title: 'ოთხშაბათი: ვარჯიში A (ზედა ტანი)',
                            exercises: [
                                { id: 'w2b1', name: 'Lat Pulldown (ზემოდან მოზიდვა)', details: '3x12 | 60წმ', rest: 60, video: 'Yc1r9pGk5sE' },
                                { id: 'w2b2', name: 'Dumbbell Bench Press (წოლჭიმი განტელებით)', details: '3x12 | 60წმ', rest: 60, video: 'BRrxLaSKfYU' },
                                { id: 'w2b3', name: 'Seated Cable Row (ჰორიზონტალური ბლოკის მოზიდვა)', details: '3x12 | 60წმ', rest: 60, video: 'GZbfZ033f74' },
                                { id: 'w2b4', name: 'Seated Dumbbell Shoulder Press (მხრებით აჭიმვა)', details: '3x15 | 60წმ', rest: 60, video: 'qEwKCR5JCog' },
                                { id: 'w2b5', name: 'Dumbbell Bicep Curl (ბიცეფსი)', details: '2x15 | 45წმ', rest: 45, video: 'ykJmrZ5v0Oo' },
                                { id: 'w2b6', name: 'Tricep Pushdown (ტრიცეფსი)', details: '2x15 | 45წმ', rest: 45, video: '2-LAMcpzODo' }
                            ],
                             cooldown: '20 წუთი - Elliptical Trainer, ოდნავ გაზრდილი წინააღმდეგობით.'
                        },
                         {
                            title: 'პარასკევი: ვარჯიში B (ქვედა ტანი)',
                            exercises: [
                                { id: 'w2c1', name: 'Goblet Squat (თასისებრი ჩაჯდომა)', details: '3x12 | 90წმ', rest: 90, video: '7p32_vI3L2A' },
                                { id: 'w2c2', name: 'Dumbbell Romanian Deadlift (რუმინული ამოწევა)', details: '3x15 | 60წმ', rest: 60, video: '_oyxCn2iSjU' },
                                { id: 'w2c3', name: 'Bodyweight Lunges (გამოხტომები)', details: '3x12 (თითო) | 60წმ', rest: 60, video: 'L8fvypoZc7I' },
                                { id: 'w2c4', name: 'Calf Raises (წვივებზე აწევა)', details: '3x20 | 45წმ', rest: 45, video: 'd_0d5s3p-l0' },
                                { id: 'w2c5', name: 'Plank (პლანკა)', details: '3x45-60წმ | 60წმ', rest: 60, video: 'pDdk2rQO3dY' },
                                { id: 'w2c6', name: 'Leg Raises (ფეხების აწევა)', details: '3x20 | 60წმ', rest: 60, video: 'r24ntO4IvKc' }
                            ],
                             cooldown: '20 წუთი - Stationary Bike. 2წთ საშუალო ტემპი, 1წთ აჩქარებული. გაიმეორე 6-ჯერ.'
                        }
                    ]
                },
                week3: {
                    warmupText: 'გახურება (10 წუთი)',
                    note: 'ამ კვირაში, თითოეულ ვარჯიშზე გამოიყენე ოდნავ მეტი წონა, ვიდრე წინა კვირებში.',
                    days: [
                        {
                            title: 'ორშაბათი: ვარჯიში A (ზედა ტანი)',
                            exercises: [
                                { id: 'w3a1', name: 'Lat Pulldown (ზემოდან მოზიდვა)', details: '3x8-10 | 60წმ', rest: 60, video: 'Yc1r9pGk5sE' },
                                { id: 'w3a2', name: 'Dumbbell Bench Press (წოლჭიმი განტელებით)', details: '3x8-10 | 60წმ', rest: 60, video: 'BRrxLaSKfYU' },
                                { id: 'w3a3', name: 'Seated Cable Row (ჰორიზონტალური ბლოკის მოზიდვა)', details: '3x8-10 | 60წმ', rest: 60, video: 'GZbfZ033f74' },
                                { id: 'w3a4', name: 'Seated Dumbbell Shoulder Press (მხრებით აჭიმვა)', details: '3x10-12 | 60წმ', rest: 60, video: 'qEwKCR5JCog' },
                                { id: 'w3a5', name: 'Dumbbell Bicep Curl (ბიცეფსი)', details: '2x10-12 | 45წმ', rest: 45, video: 'ykJmrZ5v0Oo' },
                                { id: 'w3a6', name: 'Tricep Pushdown (ტრიცეფსი)', details: '2x10-12 | 45წმ', rest: 45, video: '2-LAMcpzODo' }
                            ],
                            cooldown: '20 წუთი - Elliptical Trainer, ოდნავ გაზრდილი წინააღმდეგობით.'
                        },
                        {
                            title: 'ოთხშაბათი: ვარჯიში B (ქვედა ტანი)',
                            exercises: [
                                { id: 'w3b1', name: 'Goblet Squat (თასისებრი ჩაჯდომა)', details: '3x8-10 | 90წმ', rest: 90, video: '7p32_vI3L2A' },
                                { id: 'w3b2', name: 'Dumbbell Romanian Deadlift (რუმინული ამოწევა)', details: '3x10-12 | 60წმ', rest: 60, video: '_oyxCn2iSjU' },
                                { id: 'w3b3', name: 'Dumbbell Lunges (გამოხტომები განტელებით)', details: '3x8-10 (თითო) | 60წმ', rest: 60, video: 'L8fvypoZc7I' },
                                { id: 'w3b4', name: 'Calf Raises (წვივებზე აწევა)', details: '3x15-20 | 45წმ', rest: 45, video: 'd_0d5s3p-l0' },
                                { id: 'w3b5', name: 'Plank (პლანკა)', details: '3xMax დრო | 60წმ', rest: 60, video: 'pDdk2rQO3dY' },
                                { id: 'w3b6', name: 'Leg Raises (ფეხების აწევა)', details: '3xMax გამეორება | 60წმ', rest: 60, video: 'r24ntO4IvKc' }
                            ],
                             cooldown: '20 წუთი - Treadmill. 5წთ სწრაფი სიარული (6.0), 10წთ მცირე აღმართი, 5წთ სწორი ზედაპირი.'
                        },
                         {
                            title: 'პარასკევი: ვარჯიში A (ზედა ტანი)',
                            exercises: [
                                { id: 'w3c1', name: 'Lat Pulldown (ზემოდან მოზიდვა)', details: '3x8-10 | 60წმ', rest: 60, video: 'Yc1r9pGk5sE' },
                                { id: 'w3c2', name: 'Dumbbell Bench Press (წოლჭიმი განტელებით)', details: '3x8-10 | 60წმ', rest: 60, video: 'BRrxLaSKfYU' },
                                { id: 'w3c3', name: 'Seated Cable Row (ჰორიზონტალური ბლოკის მოზიდვა)', details: '3x8-10 | 60წმ', rest: 60, video: 'GZbfZ033f74' },
                                { id: 'w3c4', name: 'Seated Dumbbell Shoulder Press (მხრებით აჭიმვა)', details: '3x10-12 | 60წმ', rest: 60, video: 'qEwKCR5JCog' },
                                { id: 'w3c5', name: 'Dumbbell Bicep Curl (ბიცეფსი)', details: '2x10-12 | 45წმ', rest: 45, video: 'ykJmrZ5v0Oo' },
                                { id: 'w3c6', name: 'Tricep Pushdown (ტრიცეფსი)', details: '2x10-12 | 45წმ', rest: 45, video: '2-LAMcpzODo' }
                            ],
                             cooldown: '20 წუთი - Stationary Bike. 2წთ საშუალო ტემპი, 1წთ აჩქარებული. გაიმეორე 6-ჯერ.'
                        }
                    ]
                },
                 week4: {
                    warmupText: 'გახურება (10 წუთი)',
                    note: 'ამ კვირაში გამოიყენე იგივე წონები, რაც მე-3 კვირას, მაგრამ ეცადე, მეტი გამეორება შეასრულო.',
                    days: [
                        {
                            title: 'ორშაბათი: ვარჯიში B (ქვედა ტანი)',
                            exercises: [
                                { id: 'w4a1', name: 'Goblet Squat (თასისებრი ჩაჯდომა)', details: '3x10-12 | 90წმ', rest: 90, video: '7p32_vI3L2A' },
                                { id: 'w4a2', name: 'Dumbbell Romanian Deadlift (რუმინული ამოწევა)', details: '3x12-15 | 60წმ', rest: 60, video: '_oyxCn2iSjU' },
                                { id: 'w4a3', name: 'Dumbbell Lunges (გამოხტომები განტელებით)', details: '3x10-12 (თითო) | 60წმ', rest: 60, video: 'L8fvypoZc7I' },
                                { id: 'w4a4', name: 'Calf Raises (წვივებზე აწევა)', details: '3xMax გამეორება | 45წმ', rest: 45, video: 'd_0d5s3p-l0' },
                                { id: 'w4a5', name: 'Plank (პლანკა)', details: '3xMax დრო | 60წმ', rest: 60, video: 'pDdk2rQO3dY' },
                                { id: 'w4a6', name: 'Leg Raises (ფეხების აწევა)', details: '3xMax გამეორება | 60წმ', rest: 60, video: 'r24ntO4IvKc' }
                            ],
                            cooldown: '25 წუთი - Treadmill. 5წთ სწრაფი სიარული, 15წთ მცირე აღმართი (2-4%), 5წთ სწორი ზედაპირი.'
                        },
                        {
                            title: 'ოთხშაბათი: ვარჯიში A (ზედა ტანი)',
                            exercises: [
                                { id: 'w4b1', name: 'Lat Pulldown (ზემოდან მოზიდვა)', details: '3x10-12 | 60წმ', rest: 60, video: 'Yc1r9pGk5sE' },
                                { id: 'w4b2', name: 'Dumbbell Bench Press (წოლჭიმი განტელებით)', details: '3x10-12 | 60წმ', rest: 60, video: 'BRrxLaSKfYU' },
                                { id: 'w4b3', name: 'Seated Cable Row (ჰორიზონტალური ბლოკის მოზიდვა)', details: '3x10-12 | 60წმ', rest: 60, video: 'GZbfZ033f74' },
                                { id: 'w4b4', name: 'Seated Dumbbell Shoulder Press (მხრებით აჭიმვა)', details: '3x12-15 | 60წმ', rest: 60, video: 'qEwKCR5JCog' },
                                { id: 'w4b5', name: 'Dumbbell Bicep Curl (ბიცეფსი)', details: '2x12-15 | 45წმ', rest: 45, video: 'ykJmrZ5v0Oo' },
                                { id: 'w4b6', name: 'Tricep Pushdown (ტრიცეფსი)', details: '2x12-15 | 45წმ', rest: 45, video: '2-LAMcpzODo' }
                            ],
                             cooldown: '25 წუთი - Elliptical Trainer, გაზარდე წინააღმდეგობა ისე, რომ ბოლო 5 წუთი გამოწვევა იყოს.'
                        },
                         {
                            title: 'პარასკევი: ვარჯიში B (ქვედა ტანი)',
                            exercises: [
                                { id: 'w4c1', name: 'Goblet Squat (თასისებრი ჩაჯდომა)', details: '3x10-12 | 90წმ', rest: 90, video: '7p32_vI3L2A' },
                                { id: 'w4c2', name: 'Dumbbell Romanian Deadlift (რუმინული ამოწევა)', details: '3x12-15 | 60წმ', rest: 60, video: '_oyxCn2iSjU' },
                                { id: 'w4c3', name: 'Dumbbell Lunges (გამოხტომები განტელებით)', details: '3x10-12 (თითო) | 60წმ', rest: 60, video: 'L8fvypoZc7I' },
                                { id: 'w4c4', name: 'Calf Raises (წვივებზე აწევა)', details: '3xMax გამეორება | 45წმ', rest: 45, video: 'd_0d5s3p-l0' },
                                { id: 'w4c5', name: 'Plank (პლანკა)', details: '3xMax დრო | 60წმ', rest: 60, video: 'pDdk2rQO3dY' },
                                { id: 'w4c6', name: 'Leg Raises (ფეხების აწევა)', details: '3xMax გამეორება | 60წმ', rest: 60, video: 'r24ntO4IvKc' }
                            ],
                             cooldown: '25 წუთი - Stationary Bike. 2წთ საშუალო ტემპი, 1წთ აჩქარებული. გაიმეორე 8-ჯერ.'
                        }
                    ]
                }
            };
            
            // Dynamically build all week pages
            Object.keys(workoutData).forEach((weekKey, index) => {
                buildWeekPage(index + 1, workoutData[weekKey]);
            });

            showPage('navigation-page', 'აირჩიე სექცია');
            loadProgress();
            
            document.querySelectorAll('.complete-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', handleCheckboxChange);
            });
        });

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(registration => {
                    console.log('SW registered: ', registration);
                }).catch(registrationError => {
                    console.log('SW registration failed: ', registrationError);
                });
            });
        }
    </script>
</body>
</html>
